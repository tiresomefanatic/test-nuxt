import{j as he,r as I,l as Q,U as Ge,c as L,a4 as ke,a5 as ie,a6 as oe,M as ae,a7 as Se,a8 as je,X as qe,g as ce,a9 as Ue,aa as Je,i as $,ab as Ce,m as _e,o as A,D as Xe,n as E,q as U,b as C,t as Ye,N as J,p as D,d as le,s as Qe,v as Ze,x as et}from"./Douj4D2a.js";import{N as H,m as x,w as G,M as ee,a as z,b as F,S as j,t as fe,P as te,c as ge,T as V,d as tt,E as ne,k as nt,e as me,F as Te,f as Ee,D as rt,g as st,h as it,i as ot,j as at,l as lt,n as Pe,V as ut,o as dt,p as pt}from"./DSskxJog.js";import ct from"./Di32LYO2.js";import ft from"./CD_gS3S9.js";import{u as ht}from"./Qr56mRTH.js";import gt from"./DmgdFr9v.js";const mt=Symbol.for("nuxt:client-only"),Fn=he({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(t,{slots:e,attrs:n}){const r=I(!1);return Q(()=>{r.value=!0}),Ge(mt,!0),s=>{var d;if(r.value)return(d=e.default)==null?void 0:d.call(e);const i=e.fallback||e.placeholder;if(i)return i();const o=s.fallback||s.placeholder||"",a=s.fallbackTag||s.placeholderTag||"span";return L(a,n,o)}}}),ue=new WeakMap;function vt(t){if(ue.has(t))return ue.get(t);const e={...t};return e.render?e.render=(n,r,s,i,o,a)=>{var d;if(i.mounted$??n.mounted$){const p=(d=t.render)==null?void 0:d.bind(n)(n,r,s,i,o,a);return p.children===null||typeof p.children=="string"?ke(p):ie(p)}else{const p=oe(n._.vnode.el??null)??["<div></div>"];return ae(p.join(""),p.length)}}:e.template&&(e.template=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else><div></div></template>
    `),e.setup=(n,r)=>{var d;const s=Se(),i=I(s.isHydrating===!1),o=qe();if(s.isHydrating){const p={...o.attrs},h=yt(o);for(const l in p)delete o.attrs[l];Q(()=>{Object.assign(o.attrs,p),o.vnode.dirs=h})}Q(()=>{i.value=!0});const a=((d=t.setup)==null?void 0:d.call(t,n,r))||{};return je(a)?Promise.resolve(a).then(p=>typeof p!="function"?(p=p||{},p.mounted$=i,p):(...h)=>{if(i.value||!s.isHydrating){const l=p(...h);return l.children===null||typeof l.children=="string"?ke(l):ie(l)}else{const l=oe((o==null?void 0:o.vnode.el)??null)??["<div></div>"];return ae(l.join(""),l.length)}}):typeof a=="function"?(...p)=>{if(i.value)return ie(a(...p),r.attrs);const h=oe((o==null?void 0:o.vnode.el)??null)??["<div></div>"];return ae(h.join(""),h.length)}:Object.assign(a,{mounted$:i})},ue.set(t,e),e}function yt(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}const bt=he({__name:"MonacoEditor.client",props:{lang:{default:()=>"plaintext"},options:{default:()=>({})},modelUri:{},modelValue:{default:()=>""}},emits:["update:modelValue","load"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=I(!0),o=ce(()=>r.lang||r.options.language),a=Ue(),d=I(),p=Je(),h={automaticLayout:!0};let l,f;return $(()=>r.modelValue,()=>{(l==null?void 0:l.getValue())!==r.modelValue&&(l==null||l.setValue(r.modelValue))}),$(()=>[r.lang,r.modelUri],()=>{f&&f.dispose(),f=p.editor.createModel(r.modelValue,o.value,r.modelUri),l==null||l.setModel(f)}),$(()=>r.options,()=>{l==null||l.updateOptions(Ce(r.options,h))}),$(d,(m,v)=>{!d.value||v||(l=p.editor.create(d.value,Ce(r.options,h)),f=p.editor.createModel(r.modelValue,o.value,r.modelUri),a.value=l,l.layout(),l.setModel(f),l.onDidChangeModelContent(()=>{s("update:modelValue",l.getValue())}),i.value=!1,s("load",l))}),e({$editor:a}),_e(()=>{l==null||l.dispose(),f==null||f.dispose()}),(m,v)=>(A(),L("div",{ref_key:"editorElement",ref:d},[i.value?Xe(m.$slots,"default",{key:0}):E("",!0)],512))}}),Mt=/^\s*>\s$/,kt=H.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[G({find:Mt,type:this.type})]}}),Ct=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Tt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,wt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,At=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Lt=ee.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[z({find:Ct,type:this.type}),z({find:wt,type:this.type})]},addPasteRules(){return[F({find:Tt,type:this.type}),F({find:At,type:this.type})]}}),Ht="listItem",we="textStyle",Ae=/^\s*([-+*])\s$/,xt=H.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",x(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ht,this.editor.getAttributes(we)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=G({find:Ae,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=G({find:Ae,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(we),editor:this.editor})),[t]}}),It=/(^|[^`])`([^`]+)`(?!`)/,St=/(^|[^`])`([^`]+)`(?!`)/g,_t=ee.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[z({find:It,type:this.type})]},addPasteRules(){return[F({find:St,type:this.type})]}}),Et=/^```([a-z]+)?[\s\n]$/,Pt=/^~~~([a-z]+)?[\s\n]$/,Rt=H.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",x(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:p})=>(p.setSelection(j.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[fe({find:Et,type:this.type,getAttributes:t=>({language:t[1]})}),fe({find:Pt,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new te({key:new ge("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,d=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},d)),o.selection.$from.parent.type!==this.type&&o.setSelection(V.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Re=H.create({name:"doc",topNode:!0,content:"block+"});function Ot(t={}){return new te({view(e){return new $t(e,t)}})}class $t{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,d=e.nodeAfter;if(a||d){let p=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(p){let h=p.getBoundingClientRect(),l=a?h.bottom:h.top;a&&d&&(l=(l+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:h.left,right:h.right,top:l-this.width/2,bottom:l+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();i=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=tt(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Nt=ne.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ot(this.options)]}});class b extends j{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return b.valid(r)?new b(r):j.near(r)}content(){return Ee.empty}eq(e){return e instanceof b&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new b(e.resolve(n.pos))}getBookmark(){return new ve(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Bt(e)||!Dt(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&b.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let d=e.doc.resolve(s);if(b.valid(d))return d}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!me.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(b.valid(a))return a}return null}}}b.prototype.visible=!1;b.findFrom=b.findGapCursorFrom;j.jsonID("gapcursor",b);class ve{constructor(e){this.pos=e}map(e){return new ve(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return b.valid(n)?new b(n):j.near(n)}}function Bt(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Dt(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Vt(){return new te({props:{decorations:Kt,createSelectionBetween(t,e,n){return e.pos==n.pos&&b.valid(n)?new b(n):null},handleClick:Ft,handleKeyDown:zt,handleDOMEvents:{beforeinput:Wt}}})}const zt=nt({ArrowLeft:X("horiz",-1),ArrowRight:X("horiz",1),ArrowUp:X("vert",-1),ArrowDown:X("vert",1)});function X(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,d=o.empty;if(o instanceof V){if(!i.endOfTextblock(n)||a.depth==0)return!1;d=!1,a=r.doc.resolve(e>0?a.after():a.before())}let p=b.findGapCursorFrom(a,e,d);return p?(s&&s(r.tr.setSelection(new b(p))),!0):!1}}function Ft(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!b.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&me.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new b(r))),!0)}function Wt(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof b))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Te.empty;for(let o=r.length-1;o>=0;o--)s=Te.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new Ee(s,0,0));return i.setSelection(V.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function Kt(t){if(!(t.selection instanceof b))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",rt.create(t.doc,[st.widget(t.selection.head,e,{key:"gapcursor"})])}const Gt=ne.create({name:"gapCursor",addProseMirrorPlugins(){return[Vt()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=it(ot(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),jt=H.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",x(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,d=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:h})=>{if(h&&d&&o){const l=d.filter(f=>a.includes(f.type.name));p.ensureMarks(l)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Oe=H.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,x(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>fe({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Z=200,T=function(){};T.prototype.append=function(e){return e.length?(e=T.from(e),!this.length&&e||e.length<Z&&this.leafAppend(e)||this.length<Z&&e.leafPrepend(this)||this.appendInner(e)):this};T.prototype.prepend=function(e){return e.length?T.from(e).append(this):this};T.prototype.appendInner=function(e){return new qt(this,e)};T.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?T.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};T.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};T.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};T.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};T.from=function(e){return e instanceof T?e:e&&e.length?new $e(e):T.empty};var $e=function(t){function e(r){t.call(this),this.values=r}e.__proto__=t,e.prototype=Object.create(t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var d=i;d<o;d++)if(s(this.values[d],a+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var d=i-1;d>=o;d--)if(s(this.values[d],a+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Z)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Z)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(T);T.empty=new $e([]);var qt=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e.__proto__=t,e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(T);const Ut=500;class _{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,d,p=[],h=[];return this.items.forEach((l,f)=>{if(!l.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,h.push(l);return}if(s){h.push(new P(l.map));let m=l.step.map(s.slice(i)),v;m&&o.maybeStep(m).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],p.push(new P(v,void 0,void 0,p.length+h.length))),i--,v&&s.appendMap(v,i)}else o.maybeStep(l.step);if(l.selection)return a=s?l.selection.map(s.slice(i)):l.selection,d=new _(this.items.slice(0,r).append(h.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,d=!s&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let l=e.steps[h].invert(e.docs[h]),f=new P(e.mapping.maps[h],l,n),m;(m=d&&d.merge(f))&&(f=m,h?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(d=f)}let p=o-r.depth;return p>Xt&&(a=Jt(a,p),o-=p),new _(a.append(i),o)}remapping(e,n){let r=new at;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new _(this.items.append(e.map(n=>new P(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let d=n;this.items.forEach(f=>{let m=i.getMirror(--d);if(m==null)return;o=Math.min(o,m);let v=i.maps[m];if(f.step){let S=e.steps[m].invert(e.docs[m]),w=f.selection&&f.selection.map(i.slice(d+1,m));w&&a++,r.push(new P(v,S,w))}else r.push(new P(v))},s);let p=[];for(let f=n;f<o;f++)p.push(new P(i.maps[f]));let h=this.items.slice(0,s).append(p).append(r),l=new _(h,a);return l.emptyItemCount()>Ut&&(l=l.compress(this.items.length-r.length)),l}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let d=o.step.map(n.slice(r)),p=d&&d.getMap();if(r--,p&&n.appendMap(p,r),d){let h=o.selection&&o.selection.map(n.slice(r));h&&i++;let l=new P(p.invert(),d,h),f,m=s.length-1;(f=s.length&&s[m].merge(l))?s[m]=f:s.push(l)}}else o.map&&r--},this.items.length,0),new _(T.from(s.reverse()),i)}}_.empty=new _(T.empty,0);function Jt(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class P{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new P(n.getMap().invert(),n,this.selection)}}}class R{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const Xt=20;function Yt(t,e,n,r){let s=n.getMeta(N),i;if(s)return s.historyState;n.getMeta(en)&&(t=new R(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(N))return o.getMeta(N).redo?new R(t.done.addTransform(n,void 0,r,Y(e)),t.undone,Le(n.mapping.maps),t.prevTime,t.prevComposition):new R(t.done,t.undone.addTransform(n,void 0,r,Y(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),d=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Qt(n,t.prevRanges)),p=o?de(t.prevRanges,n.mapping):Le(n.mapping.maps);return new R(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,Y(e)),_.empty,p,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new R(t.done.rebased(n,i),t.undone.rebased(n,i),de(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new R(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),de(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Qt(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function Le(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function de(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function Zt(t,e,n){let r=Y(e),s=N.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),d=new R(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(N,{redo:n,historyState:d})}let pe=!1,He=null;function Y(t){let e=t.plugins;if(He!=e){pe=!1,He=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){pe=!0;break}}return pe}const N=new ge("history"),en=new ge("closeHistory");function tn(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new te({key:N,state:{init(){return new R(_.empty,_.empty,null,0,-1)},apply(e,n,r){return Yt(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?Be:r=="historyRedo"?De:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function Ne(t,e){return(n,r)=>{let s=N.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=Zt(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const Be=Ne(!1,!0),De=Ne(!0,!0),nn=ne.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Be(t,e),redo:()=>({state:t,dispatch:e})=>De(t,e)}},addProseMirrorPlugins(){return[tn(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),rn=H.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",x(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:s}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):lt(n)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:a})=>{var d;if(a){const{$to:p}=o.selection,h=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?o.setSelection(V.create(o.doc,p.pos+1)):p.nodeAfter.isBlock?o.setSelection(me.create(o.doc,p.pos)):o.setSelection(V.create(o.doc,p.pos));else{const l=(d=p.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();l&&(o.insert(h,l),o.setSelection(V.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Pe({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),sn=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,on=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,an=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ln=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,un=ee.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[z({find:sn,type:this.type}),z({find:an,type:this.type})]},addPasteRules(){return[F({find:on,type:this.type}),F({find:ln,type:this.type})]}}),dn=H.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",x(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pn="listItem",xe="textStyle",Ie=/^(\d+)\.\s$/,cn=H.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",x(this.options.HTMLAttributes,n),0]:["ol",x(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(pn,this.editor.getAttributes(xe)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=G({find:Ie,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=G({find:Ie,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(xe)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Ve=H.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),fn=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,hn=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gn=ee.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",x(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[z({find:fn,type:this.type})]},addPasteRules(){return[F({find:hn,type:this.type})]}}),mn=H.create({name:"text",group:"inline"}),vn=ne.create({name:"starterKit",addExtensions(){var t,e,n,r,s,i,o,a,d,p,h,l,f,m,v,S,w,g;const y=[];return this.options.bold!==!1&&y.push(Lt.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&y.push(kt.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&y.push(xt.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&y.push(_t.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&y.push(Rt.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&y.push(Re.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&y.push(Nt.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&y.push(Gt.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&y.push(jt.configure((d=this.options)===null||d===void 0?void 0:d.hardBreak)),this.options.heading!==!1&&y.push(Oe.configure((p=this.options)===null||p===void 0?void 0:p.heading)),this.options.history!==!1&&y.push(nn.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&y.push(rn.configure((l=this.options)===null||l===void 0?void 0:l.horizontalRule)),this.options.italic!==!1&&y.push(un.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(dn.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&y.push(cn.configure((v=this.options)===null||v===void 0?void 0:v.orderedList)),this.options.paragraph!==!1&&y.push(Ve.configure((S=this.options)===null||S===void 0?void 0:S.paragraph)),this.options.strike!==!1&&y.push(gn.configure((w=this.options)===null||w===void 0?void 0:w.strike)),this.options.text!==!1&&y.push(mn.configure((g=this.options)===null||g===void 0?void 0:g.text)),y}}),yn=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,bn=H.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",x(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Pe({find:yn,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),Mn=H.create({name:"colorWheel",group:"block",atom:!0,addAttributes(){return{sportColor:{default:"#FF6B6B"},cruiserColor:{default:"#4ECDC4"},urbanColor:{default:"#FFD93D"},offroadColor:{default:"#95E1D3"}}},parseHTML(){return[{tag:'div[data-type="color-wheel"]'}]},renderHTML({HTMLAttributes:t}){return["div",{"data-type":"color-wheel",...t},0]},addNodeView(){return ut(ct)}}),kn=vt(bt),Cn={class:"editor-wrapper"},Tn={key:0,class:"login-prompt"},wn={key:1,class:"editor-layout"},An={class:"editor-main"},Ln={class:"editor-toolbar"},Hn={class:"toolbar-left"},xn={class:"file-path"},In={class:"toolbar-right"},Sn={key:3,class:"toolbar-button loading",disabled:""},_n={class:"editor-content"},En={key:0,class:"tiptap-toolbar"},Pn={key:1,class:"raw-content-wrapper"},Rn={key:2,class:"preview-wrapper"},On=["innerHTML"],Wn=he({__name:"TiptapEditor",props:{content:{},filePath:{}},emits:["update:content","save","error"],setup(t,{emit:e}){const n=c=>{if(g.value)switch(c){case"colorwheel":g.value.chain().focus().insertContent({type:"colorWheel"}).run();break}},r={"split-with-image":`
    <div style="display: flex; gap: 2rem; margin: 3rem 0;">
      <div style="flex: 1;">
        <h2 style="margin: 0; font-size: 1.5rem; font-weight: 600; line-height: 1.4;">Section Title</h2>
      </div>
      <div style="flex: 2;">
        <div style="background: #f5f5f5; padding: 2rem; border-radius: 4px;">
          <img src="/api/placeholder/800/400" alt="Section Image" style="width: 100%; height: auto; display: block;" />
        </div>
        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 1rem 0;">Add Subtitle</h3>
        <p style="margin: 1rem 0; line-height: 1.6;">Add your description here.</p>
        <p style="margin: 1rem 0; line-height: 1.6;">Add additional details here.</p>
      </div>
    </div>
  `,"split-with-list":`
    <div style="display: flex; gap: 2rem; margin: 3rem 0;">
      <div style="flex: 1;">
        <h2 style="margin: 0; font-size: 1.5rem; font-weight: 600; line-height: 1.4;">Section Title</h2>
      </div>
      <div style="flex: 2;">
        <img src="/api/placeholder/800/400" alt="Section Image" style="width: 100%; height: auto; display: block; padding: 2rem; border-radius: 4px;" />
        <p style="margin: 1rem 0; line-height: 1.6;">Add your description here.</p>
        <ul style="list-style: none; padding: 0; margin: 1rem 0;">
          <li style="margin: 0.5rem 0; line-height: 1.6;">List item one</li>
          <li style="margin: 0.5rem 0; line-height: 1.6;">List item two</li>
          <li style="margin: 0.5rem 0; line-height: 1.6;">List item three</li>
          <li style="margin: 0.5rem 0; line-height: 1.6;">List item four</li>
        </ul>
      </div>
    </div>
  `},s=c=>{if(!g.value)return;const u=r[c];u&&g.value.chain().focus().createParagraphNear().insertContent(u).focus().run()},i=H.create({name:"styledDiv",group:"block",content:"block+",addAttributes(){return{style:{default:null,parseHTML:c=>c.getAttribute("style"),renderHTML:c=>c.style?{style:c.style}:{}},class:{default:null,parseHTML:c=>c.getAttribute("class"),renderHTML:c=>c.class?{class:c.class}:{}},"data-type":{default:null,parseHTML:c=>c.getAttribute("data-type"),renderHTML:c=>c["data-type"]?{"data-type":c["data-type"]}:{}}}},parseHTML(){return[{tag:"div"}]},renderHTML({HTMLAttributes:c}){return["div",c,0]}}),o=H.create({name:"gridContainer",group:"block",content:"block+",addAttributes(){return{style:{default:null,parseHTML:c=>c.getAttribute("style"),renderHTML:c=>c.style?{style:c.style}:{}}}},parseHTML(){return[{tag:"div",getAttrs:c=>(c.getAttribute("style")||"").includes("grid")?{}:!1}]},renderHTML({HTMLAttributes:c}){return["div",c,0]}}),a=Ve.extend({addAttributes(){var c;return{...(c=this.parent)==null?void 0:c.call(this),style:{default:null,parseHTML:u=>u.getAttribute("style"),renderHTML:u=>u.style?{style:u.style}:{}}}}}),d=Oe.extend({addAttributes(){var c;return{...(c=this.parent)==null?void 0:c.call(this),style:{default:null,parseHTML:u=>u.getAttribute("style"),renderHTML:u=>u.style?{style:u.style}:{}}}}}),p=bn.extend({addAttributes(){var c;return{...(c=this.parent)==null?void 0:c.call(this),style:{default:null,parseHTML:u=>u.getAttribute("style"),renderHTML:u=>u.style?{style:u.style}:{}}}}}),h=t,l=e,f=I(""),m=I(""),v=I(!1),S=I(!1),w=I(!1),g=I(null),y=I(!1),O=I(""),W=I(null),{showToast:ze}=et(),re=ht(),{isLoggedIn:ye}=re;ce(()=>!1);const q=c=>{if(!c)return"";c=c.replace(/<div[^>]*data-type="color-wheel"[^>]*>.*?<\/div>/g,`
::color-wheel
::
`).replace(/<div[^>]*data-type="test-component"[^>]*>.*?<\/div>/g,`
::test-component
::
`);let u=c.replace(/<strong>/g,"§§STRONG§§").replace(/<\/strong>/g,"§§/STRONG§§").replace(/<em>/g,"§§EM§§").replace(/<\/em>/g,"§§/EM§§");return u=u.replace(/></g,`>
<`).replace(/(<div[^>]*>|<\/div>|<p>|<\/p>|<h[1-6]>|<\/h[1-6]>|<ul>|<\/ul>|<ol>|<\/ol>|<li>|<\/li>)/g,k=>`
${k}
`).split(`
`).map(k=>k.trim()).filter(k=>k.length>0).join(`
`),u=u.replace(/§§STRONG§§/g,"<strong>").replace(/§§\/STRONG§§/g,"</strong>").replace(/§§EM§§/g,"<em>").replace(/§§\/EM§§/g,"</em>"),u.replace(/\n{3,}/g,`

`).trim()},Fe={theme:"vs",language:"html",fontSize:13,lineNumbers:"on",renderWhitespace:"selection",minimap:{enabled:!0,scale:1,showSlider:"mouseover"},scrollBeyondLastLine:!1,wordWrap:"on",lineHeight:20,padding:{top:16,bottom:16},folding:!0,foldingHighlight:!0,foldingStrategy:"indentation",showFoldingControls:"always",bracketPairColorization:{enabled:!0},autoClosingBrackets:"always",autoClosingQuotes:"always",autoClosingTags:!0,formatOnType:!0,formatOnPaste:!0,autoIndent:"advanced",tabSize:2,automaticLayout:!0,scrollbar:{vertical:"visible",horizontal:"visible",useShadows:!1,verticalHasArrows:!1,horizontalHasArrows:!1,verticalScrollbarSize:10,horizontalScrollbarSize:10},suggest:{snippetsPreventQuickSuggestions:!1,showWords:!1,showClasses:!0,showTags:!0,showAttributes:!0},quickSuggestions:{other:!0,comments:!1,strings:!0}},We=Re.extend({content:"block+"}),be=c=>c?c.replace(/::color-wheel\s*::/g,'<div data-type="color-wheel"></div>').replace(/::test-component\s*::/g,'<div data-type="test-component"></div>'):"";Q(()=>{if(g.value=new dt({extensions:[vn.configure({document:!1,paragraph:!1,heading:!1,bulletList:!1,orderedList:!1}),We,a,d,p.configure({inline:!0}),i,o,Mn.configure({HTMLAttributes:{class:"color-wheel-node"}})],editorProps:{attributes:{class:"prose-editor",spellcheck:"false"},transformPastedHTML:u=>u,handleDrop:!1,handleClick:()=>!0,handleKeyDown:({event:u})=>u.key==="Tab"},onUpdate:({editor:u})=>{const k=u.getHTML();if(k===f.value)return;const{from:M,to:Me}=u.state.selection;setTimeout(()=>{const B=q(k);f.value=B,O.value=B,l("update:content",B),g.value&&g.value.commands.setTextSelection({from:M,to:Me})},0)},parseOptions:{preserveWhitespace:"full"}}),h.content){const u=be(h.content),k=q(u);g.value.commands.setContent(k,!1,{preserveWhitespace:"full"}),f.value=k,m.value=k,O.value=k}const c=g.value.getHTML();if(c){const u=q(c);l("update:content",u)}y.value=!0});const Ke=c=>{f.value=c,O.value=c,l("update:content",c)};$(w,c=>{g.value&&(c||(g.value.commands.setContent(f.value,!1,{preserveWhitespace:"full"}),O.value=f.value))}),$(()=>h.content,c=>{if(!g.value||c===void 0)return;const{from:u,to:k}=g.value.state.selection,M=be(c);g.value.getHTML()!==M&&(g.value.commands.setContent(M,!1),setTimeout(()=>{g.value&&g.value.commands.setTextSelection({from:u,to:k})},0));const B=q(M);f.value=B,O.value=B},{deep:!0}),$(w,c=>{g.value&&(c?Ze(()=>{W.value&&W.value.setValue(f.value)}):(g.value.commands.setContent(f.value,!1,{preserveWhitespace:"full"}),O.value=f.value))});const K=ce(()=>f.value!==m.value),se=async()=>{var c;if(!(!K.value||v.value)){v.value=!0;try{if(!ye.value)throw new Error("Please log in to GitHub first");{const k=(c=Se().$content)==null?void 0:c.storage;k&&await k.clearAll()}l("save",f.value),m.value=f.value}catch(u){console.error("Save error:",u),ze({title:"Error",message:u instanceof Error?u.message:"Failed to save changes",type:"error"}),l("error",u)}finally{v.value=!1}}};return _e(()=>{g.value&&g.value.destroy(),W.value&&W.value.dispose()}),(c,u)=>{const k=kn;return A(),L("div",Cn,[U(ye)?(A(),L("div",wn,[C("div",An,[C("div",Ln,[C("div",Hn,[C("span",xn,Ye(h.filePath),1)]),C("div",In,[!S.value&&!w.value?(A(),L(J,{key:0},[C("button",{class:"toolbar-button",onClick:u[1]||(u[1]=M=>w.value=!0)}," Raw "),C("button",{class:"toolbar-button",onClick:u[2]||(u[2]=M=>S.value=!0)}," Preview "),K.value&&!v.value?(A(),L("button",{key:0,class:"toolbar-button primary",onClick:se}," Commit Changes ")):E("",!0)],64)):E("",!0),w.value?(A(),L(J,{key:1},[C("button",{class:"toolbar-button",onClick:u[3]||(u[3]=M=>w.value=!1)}," Normal "),C("button",{class:"toolbar-button",onClick:u[4]||(u[4]=M=>{S.value=!0,w.value=!1})}," Preview "),K.value&&!v.value?(A(),L("button",{key:0,class:"toolbar-button primary",onClick:se}," Commit Changes ")):E("",!0)],64)):E("",!0),S.value?(A(),L(J,{key:2},[C("button",{class:"toolbar-button",onClick:u[5]||(u[5]=M=>S.value=!1)}," Edit "),K.value&&!v.value?(A(),L("button",{key:0,class:"toolbar-button primary",onClick:se}," Commit Changes ")):E("",!0)],64)):E("",!0),v.value?(A(),L("button",Sn," Saving... ")):E("",!0)])]),C("div",_n,[!S.value&&!w.value?(A(),L(J,{key:0},[g.value?(A(),L("div",En,[C("button",{onClick:u[6]||(u[6]=M=>g.value.chain().focus().toggleBold().run()),class:D({"is-active":g.value.isActive("bold")})}," Bold ",2),C("button",{onClick:u[7]||(u[7]=M=>g.value.chain().focus().toggleItalic().run()),class:D({"is-active":g.value.isActive("italic")})}," Italic ",2),C("button",{onClick:u[8]||(u[8]=M=>g.value.chain().focus().toggleHeading({level:1}).run()),class:D({"is-active":g.value.isActive("heading",{level:1})})}," H1 ",2),C("button",{onClick:u[9]||(u[9]=M=>g.value.chain().focus().toggleHeading({level:2}).run()),class:D({"is-active":g.value.isActive("heading",{level:2})})}," H2 ",2),C("button",{onClick:u[10]||(u[10]=M=>g.value.chain().focus().toggleBulletList().run()),class:D({"is-active":g.value.isActive("bulletList")})}," List ",2),le(gt,{onInsertComponent:n,onInsertSection:s})])):E("",!0),y.value?(A(),Qe(U(pt),{key:1,editor:g.value,class:D(["markdown-editor",{"has-changes":K.value}])},null,8,["editor","class"])):E("",!0)],64)):w.value?(A(),L("div",Pn,[le(k,{modelValue:f.value,"onUpdate:modelValue":u[11]||(u[11]=M=>f.value=M),class:"monaco-editor",options:Fe,onChange:Ke,onMount:u[12]||(u[12]=M=>W.value=M)},null,8,["modelValue"])])):(A(),L("div",Rn,[C("div",{innerHTML:O.value},null,8,On)]))])]),le(ft)])):(A(),L("div",Tn,[u[13]||(u[13]=C("p",{class:"login-message"},"Please sign in with GitHub to edit this file",-1)),C("button",{onClick:u[0]||(u[0]=(...M)=>U(re).login&&U(re).login(...M)),class:"login-button"}," Sign in with GitHub ")]))])}}});export{Wn as _,Fn as a};
